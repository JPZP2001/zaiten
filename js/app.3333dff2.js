(function(){"use strict";var e={3430:function(e,t,r){var a=r(3751),o=r(7204),n=r(641);const s={id:"app"};function i(e,t,r,a,o,i){const c=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",s,[((0,n.uX)(),(0,n.Wv)(c,{key:e.$route.fullPath}))])}var c={name:"App",components:{}},u=r(6262);const l=(0,u.A)(c,[["render",i]]);var p=l,d=r(5220);const h={class:"home"};function g(e,t,r,a,o,s){const i=(0,n.g2)("BackgroundVideo"),c=(0,n.g2)("ButtonToHome");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(i),(0,n.Lk)("div",h,[(0,n.bF)(c)])],64)}const m={class:"background-video"},f={autoplay:"",muted:"",playsinline:"",loop:""},v=["src"];function b(e,t,r,a,o,s){return(0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("video",f,[(0,n.Lk)("source",{src:o.videoSrc,type:"video/mp4"},null,8,v),(0,n.eW)(" Your browser does not support the video tag. ")])])}var y={name:"BackgroundVideo",data(){return{desktopVideoSrc:"/zaiten/bg.mp4",mobileVideoSrc:"/zaiten/bgMobile.mp4",videoSrc:""}},mounted(){this.updateVideoSource(),window.addEventListener("resize",this.updateVideoSource)},beforeUnmount(){window.removeEventListener("resize",this.updateVideoSource)},methods:{updateVideoSource(){const e=window.innerWidth<=768;this.videoSrc=e?this.mobileVideoSrc:this.desktopVideoSrc}}};const k=(0,u.A)(y,[["render",b],["__scopeId","data-v-4975c67c"]]);var L=k;const w=e=>((0,n.Qi)("data-v-228fa035"),e=e(),(0,n.jt)(),e),_=w((()=>(0,n.Lk)("span",null,"START",-1))),E=[_];function S(e,t,r,a,o,s){return(0,n.uX)(),(0,n.CE)("button",{class:"button",onClick:t[0]||(t[0]=(...e)=>s.goToSearch&&s.goToSearch(...e))},E)}r(4114);var C={name:"StartButton",methods:{goToSearch(){const e=["pop",80,.7,.8],t=encodeURIComponent(JSON.stringify(e));this.$router.push(`/search/${t}`)}}};const T=(0,u.A)(C,[["render",S],["__scopeId","data-v-228fa035"]]);var P=T,O={name:"HomePage",components:{ButtonToHome:P,BackgroundVideo:L}};const A=(0,u.A)(O,[["render",g],["__scopeId","data-v-61e95621"]]);var x=A,V=r(33);const X=e=>((0,n.Qi)("data-v-3c4a2b03"),e=e(),(0,n.jt)(),e),$={class:"search"},j={key:0,class:"container"},z={class:"header"},B={class:"trackName"},F=X((()=>(0,n.Lk)("br",null,null,-1))),I={class:"artistName"},U=["href"],H=["src"],M={key:0},N={controls:""},R=["src"],J={key:1},G=X((()=>(0,n.Lk)("p",{class:"previewError"},"No preview available.",-1))),W=[G],D={key:1};function Q(e,t,r,a,o,s){const i=(0,n.g2)("LogoText"),c=(0,n.g2)("PopupMessage"),u=(0,n.g2)("searchSliders");return(0,n.uX)(),(0,n.CE)("div",$,[(0,n.bF)(i),(0,n.Lk)("div",null,[(0,n.bF)(c,{ref:"popupMessage"},null,512)]),o.track&&o.track.external_urls&&o.track.external_urls.spotify?((0,n.uX)(),(0,n.CE)("div",j,[(0,n.Lk)("div",z,[(0,n.Lk)("span",B,(0,V.v_)(o.track.name),1),F,(0,n.Lk)("span",I,(0,V.v_)(o.track?.artists?.[0]?.name||"Loading..."),1)]),(0,n.Lk)("div",null,[(0,n.Lk)("a",{href:o.track.external_urls.spotify,target:"_blank"},[(0,n.Lk)("img",{src:o.track.album.images[0].url,height:"200",width:"200"},null,8,H)],8,U),o.track.preview_url?((0,n.uX)(),(0,n.CE)("div",M,[(0,n.Lk)("audio",N,[(0,n.Lk)("source",{src:o.track.preview_url,type:"audio/mpeg"},null,8,R),(0,n.eW)(" Your browser does not support the audio element. ")])])):((0,n.uX)(),(0,n.CE)("div",J,W))])])):((0,n.uX)(),(0,n.CE)("div",D," Loading recommendations... ")),(0,n.bF)(u,{categories:o.categories},null,8,["categories"])])}const Y={class:"form-group"},K={class:"labeled item"},q=(0,n.Lk)("label",{class:"genreLabel",for:"genre"},"Genre",-1),Z=(0,n.Lk)("br",null,null,-1),ee=["value"],te={class:"item labeled"},re=(0,n.Lk)("label",{for:"popularity"},"Popularity",-1),ae=(0,n.Lk)("br",null,null,-1),oe={class:"range-input"},ne=(0,n.Lk)("div",{class:"value",id:"value1"},null,-1),se=(0,n.Lk)("br",null,null,-1),ie=(0,n.Lk)("label",{for:"danceability"},"Danceability",-1),ce=(0,n.Lk)("br",null,null,-1),ue=(0,n.Lk)("div",{class:"value2"},null,-1),le=(0,n.Lk)("br",null,null,-1),pe=(0,n.Lk)("label",{for:"energy"},"Energy",-1),de=(0,n.Lk)("br",null,null,-1),he=(0,n.Lk)("div",{class:"value3"},null,-1),ge=(0,n.Lk)("div",{class:"form-group item"},[(0,n.Lk)("button",{type:"submit",class:"chunky-button"},"Search")],-1);function me(e,t,r,o,s,i){return(0,n.uX)(),(0,n.CE)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"])),class:"form"},[(0,n.Lk)("div",Y,[(0,n.Lk)("div",K,[q,Z,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.genre=e),id:"genre",class:"form-select"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.genres,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,V.v_)(e),9,ee)))),128))],512),[[a.u1,s.genre]])]),(0,n.Lk)("div",te,[re,ae,(0,n.Lk)("div",oe,[(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=e=>s.popularity=e),id:"input1",min:"0",max:"100",step:"1",class:"form-range"},null,512),[[a.Jo,s.popularity]]),ne]),se,ie,ce,(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":t[2]||(t[2]=e=>s.danceability=e),id:"danceability",min:"0",max:"1",step:"0.05",class:"form-range"},null,512),[[a.Jo,s.danceability]]),ue,le,pe,de,(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":t[3]||(t[3]=e=>s.energy=e),id:"energy",min:"0",max:"1",step:"0.05",class:"form-range"},null,512),[[a.Jo,s.energy]]),he])]),ge],32)}r(4979),r(4603),r(7566),r(8721);async function fe(e,t){const r=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(e+":"+t)},body:"grant_type=client_credentials"}),a=await r.json();return a.access_token}async function ve(e){const t=await fetch("https://api.spotify.com/v1/browse/categories",{method:"GET",headers:{Authorization:"Bearer "+e}}),r=await t.json();return r.categories.items}async function be(e){const t=await fetch("https://api.spotify.com/v1/recommendations/available-genre-seeds",{method:"GET",headers:{Authorization:"Bearer "+e}}),r=await t.json();return r.genres}async function ye(e,t){const r=new URL("https://api.spotify.com/v1/recommendations");Object.keys(t).forEach((e=>r.searchParams.append(e,t[e])));const a=await fetch(r,{method:"GET",headers:{Authorization:"Bearer "+e}}),o=await a.json();return o.tracks}var ke={name:"SearchSlider",data(){return{genres:[],energy:"",popularity:"",danceability:"",genre:""}},methods:{submitForm(){const e=[this.genre,this.popularity,this.danceability,this.energy],t=encodeURIComponent(JSON.stringify(e));this.$router.replace(`/search/${t}`)}},async created(){const e="9910ea221f54417c88ab33a2455d34d1",t="87d2d87f6f95480aaa05637c4b2e1f92";if(this.$route.params.params){const a=decodeURIComponent(this.$route.params.params),o=JSON.parse(a),n={seed_genres:o[0],target_popularity:o[1],target_danceability:o[2],target_energy:o[3]};try{const r=await fe(e,t);this.genres=await be(r),this.popularity=n.target_popularity,this.danceability=n.target_danceability,this.energy=n.target_energy,this.genre=n.seed_genres}catch(r){console.error("Error fetching categories:",r)}}else try{const r=await fe(e,t);this.genres=await be(r)}catch(r){console.error("Error fetching categories:",r)}}};const Le=(0,u.A)(ke,[["render",me]]);var we=Le;function _e(e,t,r,a,o,s){return(0,n.uX)(),(0,n.CE)("a",{class:"logo",onClick:t[0]||(t[0]=(...e)=>s.goToHome&&s.goToHome(...e))},"zaiten.")}var Ee={name:"logoText",methods:{goToHome(){this.$router.push("/")}}};const Se=(0,u.A)(Ee,[["render",_e]]);var Ce=Se;const Te={key:0,class:"popup-overlay"},Pe={class:"popup-content"};function Oe(e,t,r,a,o,s){return o.visible?((0,n.uX)(),(0,n.CE)("div",Te,[(0,n.Lk)("div",Pe,[(0,n.Lk)("p",null,(0,V.v_)(o.message),1),(0,n.Lk)("button",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.hidePopup&&s.hidePopup(...e))},"Got it")])])):(0,n.Q3)("",!0)}var Ae={name:"PopupMessage",data(){return{visible:!1,message:""}},methods:{showPopup(e){this.message=e,this.visible=!0},hidePopup(){this.visible=!1}}};const xe=(0,u.A)(Ae,[["render",Oe],["__scopeId","data-v-7c38573a"]]);var Ve=xe,Xe={name:"SearchPage",components:{searchSliders:we,LogoText:Ce,PopupMessage:Ve},data(){return{categories:this.categories,recommendations:[],track:[],params:[]}},async created(){performance.navigation.type==performance.navigation.TYPE_RELOAD?this.$router.push("/"):console.log("This page is not reloaded");let e=performance.getEntriesByType("navigation");e.length>0&&"reload"===e[0].type?this.$router.push("/"):console.log("This page is not reloaded");const t="9910ea221f54417c88ab33a2455d34d1",r="87d2d87f6f95480aaa05637c4b2e1f92",a=decodeURIComponent(this.$route.params.params),o=JSON.parse(a),n={seed_genres:o[0],target_popularity:o[1],target_danceability:o[2],target_energy:o[3]};try{const e=await fe(t,r);this.tracks=await ye(e,n),this.categories=await ve(e);const a=Math.floor(Math.random()*this.tracks.length);this.track=this.tracks[a]}catch(s){console.error("Error fetching from API:",s)}},methods:{triggerPopup(){this.$refs.popupMessage.showPopup("Customize the fields below to search for a random song that matches your preferences!")}},beforeRouteEnter(e,t,r){r((e=>{"HomePage"===t.name&&e.triggerPopup()}))}};const $e=(0,u.A)(Xe,[["render",Q],["__scopeId","data-v-3c4a2b03"]]);var je=$e;const ze=[{path:"/",name:"HomePage",component:x},{path:"/search/:params",name:"Search",component:je}],Be=(0,d.aE)({history:(0,d.LA)("/zaiten/"),routes:ze});var Fe=Be;const Ie=(0,o.$N)();(0,a.Ef)(p).use(Ie).use(Fe).mount("#app")}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,a,o,n){if(!a){var s=1/0;for(l=0;l<e.length;l++){a=e[l][0],o=e[l][1],n=e[l][2];for(var i=!0,c=0;c<a.length;c++)(!1&n||s>=n)&&Object.keys(r.O).every((function(e){return r.O[e](a[c])}))?a.splice(c--,1):(i=!1,n<s&&(s=n));if(i){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[a,o,n]}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,n,s=a[0],i=a[1],c=a[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(c)var l=c(r)}for(t&&t(a);u<s.length;u++)n=s[u],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(l)},a=self["webpackChunkzaiten"]=self["webpackChunkzaiten"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[504],(function(){return r(3430)}));a=r.O(a)})();
//# sourceMappingURL=app.3333dff2.js.map